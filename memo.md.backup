é¡ä¼¼å›ç­”ã®ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã«ã¤ã„ã¦

  å®Ÿè£…é›£æ˜“åº¦ã¨æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ï¼š

  å®Ÿè£…ã‚ªãƒ—ã‚·ãƒ§ãƒ³

  1. ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼ˆæ¨å¥¨ï¼‰ ğŸŸ¢
  # åŸºæœ¬çš„ãªæ­£è¦åŒ–ã®ã¿
  def normalize_answer(text)
    text.strip           # å‰å¾Œã®ç©ºç™½å‰Šé™¤
        .downcase        # å°æ–‡å­—çµ±ä¸€
        .tr('ï¼-ï¼™', '0-9') # å…¨è§’æ•°å­—â†’åŠè§’
        .gsub(/\s+/, '')   # ç©ºç™½å‰Šé™¤
  end
  - å¯¾å¿œä¾‹ï¼šã€Œã‚Šã‚“ã”ã€ã€Œãƒªãƒ³ã‚´ã€ã€Œï¼²ï¼©ï¼®ï¼§ï¼¯ã€â†’ åŒä¸€è¦–
  - å®Ÿè£…: 1æ™‚é–“ç¨‹åº¦
  - ç²¾åº¦: 60-70%

  2. ä¸­ç´šç‰ˆ
  # ã²ã‚‰ãŒãª/ã‚«ã‚¿ã‚«ãƒŠçµ±ä¸€ + åŸºæœ¬çš„ãªè¡¨è¨˜ã‚†ã‚Œå¯¾å¿œ
  gem 'mojinizer' # ã²ã‚‰ãŒãªâ‡”ã‚«ã‚¿ã‚«ãƒŠå¤‰æ›
  - å¯¾å¿œä¾‹ï¼šã€Œã‚Šã‚“ã”ã€ã€Œãƒªãƒ³ã‚´ã€ã€Œæ—æªã€ï¼ˆè¾æ›¸ç™»éŒ²å¿…è¦ï¼‰
  - å®Ÿè£…: 3-4æ™‚é–“
  - ç²¾åº¦: 80%

  3. é«˜åº¦ç‰ˆ
  # å½¢æ…‹ç´ è§£æ + é¡ä¼¼åº¦è¨ˆç®—
  gem 'natto' # MeCabä½¿ç”¨
  - å¯¾å¿œä¾‹ï¼šã€Œãƒãƒƒã‚¯ã€ã€Œãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰ã€ã‚‚åŒä¸€è¦–å¯èƒ½
  - å®Ÿè£…: 1æ—¥ä»¥ä¸Š
  - ç²¾åº¦: 90%+


Cookie/ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«ã‚ˆã‚‹é‡è¤‡å›ç­”é˜²æ­¢

  å®Ÿè£…æ–¹æ³•ã®é¸æŠè‚¢ï¼š

  1. Cookieãƒ™ãƒ¼ã‚¹ï¼ˆæ¨å¥¨ï¼‰
  # å›ç­”æ™‚ã«è³ªå•IDã¨ç´ã¥ã‘ãŸCookieã‚’è¨­å®š
  cookies.permanent.signed["answered_#{question.id}"] = true
  # æœ‰åŠ¹æœŸé™ï¼š30æ—¥ãªã©è¨­å®šå¯èƒ½
  - ãƒ¡ãƒªãƒƒãƒˆ: ã‚·ãƒ³ãƒ—ãƒ«ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‚æ°¸ç¶š
  - ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ: Cookieå‰Šé™¤ã‚„ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã§å›é¿å¯èƒ½

  2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹
  session[:answered_questions] ||= []
  session[:answered_questions] << question.id
  - ãƒ¡ãƒªãƒƒãƒˆ: ã‚ˆã‚Šç°¡å˜ãªå®Ÿè£…
  - ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ: ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã‚‹ã¨æ¶ˆãˆã‚‹

  3. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ–¹å¼ï¼ˆCookie + ãƒ‡ãƒã‚¤ã‚¹ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆï¼‰
  - IPã‚¢ãƒ‰ãƒ¬ã‚¹ + User-Agent + ç”»é¢è§£åƒåº¦ãªã©ã‚’çµ„ã¿åˆã‚ã›
  - ã‚ˆã‚Šå¼·å›ºã ãŒã€å®Œå…¨ã§ã¯ãªã„


â— Xé€£æºã®å®Ÿè£…æ–¹æ³•ã®é•ã„

  1. ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³æ–¹å¼ï¼ˆWeb Intent APIï¼‰ ğŸŸ¢ æ¨å¥¨

  # å®Ÿè£…ä¾‹
  <%= link_to
  "https://twitter.com/intent/tweet?text=#{text}&url=#{url}",
      target: "_blank", class: "btn btn-twitter" do %>
    Xã§ã‚·ã‚§ã‚¢
  <% end %>

  ãƒ¡ãƒªãƒƒãƒˆï¼š
  - âœ… å®Ÿè£…ãŒè¶…ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆãƒªãƒ³ã‚¯ã‚’ä½œã‚‹ã ã‘ï¼‰
  - âœ… èªè¨¼ä¸è¦ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒXå´ã§ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãªã‚‰å³æŠ•ç¨¿ç”»é¢ï¼‰
  - âœ… APIã‚­ãƒ¼ä¸è¦ï¼ˆX Developerç™»éŒ²ä¸è¦ï¼‰
  - âœ… ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ•ãƒªãƒ¼

  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼š
  - âŒ æŠ•ç¨¿ã®è‡ªå‹•åŒ–ä¸å¯
  - âŒ æŠ•ç¨¿ã—ãŸã‹ã©ã†ã‹ã®è¿½è·¡ä¸å¯

  2. OAuthèªè¨¼æ–¹å¼

  # gem 'omniauth-twitter2' ãªã©ã‚’ä½¿ç”¨
  # X Developer Portalã§ã‚¢ãƒ—ãƒªç™»éŒ²ãŒå¿…è¦

  ãƒ¡ãƒªãƒƒãƒˆï¼š
  - âœ… æŠ•ç¨¿ã®è‡ªå‹•åŒ–å¯èƒ½
  - âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—å¯èƒ½
  - âœ… æŠ•ç¨¿ã®æˆåŠŸ/å¤±æ•—ã‚’æ¤œçŸ¥å¯èƒ½

  ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼š
  - âŒ å®Ÿè£…ãŒè¤‡é›‘
  - âŒ X Developerç™»éŒ²å¿…è¦ï¼ˆå¯©æŸ»ã‚ã‚Šï¼‰
  - âŒ APIã‚­ãƒ¼ã®ç®¡ç†ãŒå¿…è¦
  - âŒ APIåˆ¶é™ã‚ã‚Š
  - âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨©é™è¨±å¯ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹

  çµè«–

  ä»Šå›ã®è¦ä»¶ãªã‚‰ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³æ–¹å¼ãŒæœ€é©ã§ã™ï¼
  - ã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£…ã¨ã„ã†æ–¹é‡ã«åˆè‡´
  - URLã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã¨ä¸¦ã¹ã¦é…ç½®å¯èƒ½
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ•ç¨¿å†…å®¹ã‚’ç·¨é›†ã—ã¦ã‹ã‚‰æŠ•ç¨¿ã§ãã‚‹


# Xé€£æºã®å®Ÿè£…æ–¹æ³•ã®é•ã„
  docker-compose run --rm web rails new . --force --database=postgresql
      --skip-bundle
      â€» --forceã§æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã€--skip-bundleã§bundle
      installã‚’ã‚¹ã‚­ãƒƒãƒ—
  
  ## ã“ã‚Œã‚’ã‚„ã‚‹ç†ç”±
   1. --forceï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šæ›¸ãï¼‰ã‚’ä½¿ã†ç†ç”±

  ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯æ—¢ã«ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¦ã„ã¾ã™ï¼š
  - Gemfile - å¿…è¦ãªgemã‚’è©³ç´°ã«å®šç¾©æ¸ˆã¿
  - README.md - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - config/database.yml - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šã®ä¸€éƒ¨

  rails newã¯é€šå¸¸ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã‚ˆã†ã¨ã—ã¾ã™ãŒã€æ—¢ã«å­˜åœ¨ã™ã‚‹å ´
  åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚--forceã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã“ã¨ã§ï¼š
  - Railsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆapp/ã€bin/ã€config/ã®ä»–ãƒ•
  ã‚¡ã‚¤ãƒ«ãªã©ï¼‰ã‚’ç”Ÿæˆ
  - æ—¢å­˜ã®Gemfileãªã©ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ãŒã€å¾Œã§å…ƒã«æˆ»ã™ã‹ã€ãƒãƒ¼ã‚¸ã—ã¾ã™

  2. --skip-bundleã‚’ä½¿ã†ç†ç”±

  Dockerç’°å¢ƒã§ã¯bundle installã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒé‡è¦ã§ã™ï¼š

  1. ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã§å®Ÿè¡Œã™ã‚‹ã¨å•é¡ŒãŒèµ·ã“ã‚‹
    - ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§OSãŒç•°ãªã‚‹å ´åˆã€ãƒã‚¤ãƒ†ã‚£ãƒ–æ‹¡å¼µã‚’æŒã¤gemãŒæ­£ã—ãã‚¤
  ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œãªã„
    - ä¾‹ï¼špg gemã¯PostgreSQLã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜
  2. ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    - Dockerfileã®ä¸­ã§bundle
  installã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€æ­£ã—ã„ç’°å¢ƒã§gemã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    - docker-compose buildã§ä¸€æ‹¬å‡¦ç†



â— Dockerç’°å¢ƒã§ã®Rails newã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™ï¼š

  ã‚¹ãƒ†ãƒƒãƒ—1: rails new ã®å®Ÿè¡Œ

  docker-compose run --rm web rails new . --force --database=postgresql
  --skip-bundle

  ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½•ãŒèµ·ãã‚‹ã‹ï¼š

  1. docker-compose run --rm web
    - ä¸€æ™‚çš„ã«webã‚µãƒ¼ãƒ“ã‚¹ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
    - --rmã§å®Ÿè¡Œå¾Œã«ã‚³ãƒ³ãƒ†ãƒŠã‚’è‡ªå‹•å‰Šé™¤
  2. rails new .
    - ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ.ï¼‰ã«Railsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é››å½¢ã‚’ç”Ÿæˆ
    - ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹é€ ãŒä½œã‚‰ã‚Œã¾ã™ï¼š
  app/           # MVCã®ã‚³ãƒ¼ãƒ‰
  bin/           # å®Ÿè¡Œå¯èƒ½ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  config/        # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
  db/            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
  lib/           # ã‚«ã‚¹ã‚¿ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  public/        # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
  test/          # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
  vendor/        # ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£
  config.ru      # Rackã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
  Rakefile       # Rakeã‚¿ã‚¹ã‚¯
  3. --forceã®å½±éŸ¿
    - æ—¢å­˜ã®Gemfileã‚’Railsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸Šæ›¸ã
    - æ—¢å­˜ã®README.mdã‚‚ä¸Šæ›¸ã
    - ãŸã ã—ã€ã‚ãªãŸãŒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸGemfileã¯ä¸€æ™‚çš„ã«å¤±ã‚ã‚Œã¾ã™

  ã‚¹ãƒ†ãƒƒãƒ—2: Gemfileã®ãƒãƒ¼ã‚¸ä½œæ¥­

  rails newã§ç”Ÿæˆã•ã‚ŒãŸGemfileã¨ã€å…ƒã®ã‚«ã‚¹ã‚¿ãƒ Gemfileã‚’æ¯”è¼ƒãƒ»çµ±åˆï¼š

  å…ƒã®ã‚«ã‚¹ã‚¿ãƒ Gemfileï¼ˆä¿å­˜ã—ã¦ãŠã„ãŸã‚‚ã®ï¼‰

  gem "rails", "~> 8.0.0"
  gem "bootstrap", "~> 5.3.0"    # è¿½åŠ ã—ãŸgem
  gem "solid_queue"              # Rails 8ã®æ–°æ©Ÿèƒ½
  # ãªã©...

  Railsç”Ÿæˆã®Gemfile

  gem "rails", "~> 8.0.0"
  gem "puma", ">= 5.0"
  gem "tzinfo-data"              # Windowsã‚µãƒãƒ¼ãƒˆ
  # ãªã©æ¨™æº–çš„ãªgem

  ãƒãƒ¼ã‚¸å¾Œã®Gemfile

  ä¸¡æ–¹ã®è‰¯ã„ã¨ã“ã‚ã‚’çµ„ã¿åˆã‚ã›ã¦ï¼š
  - Rails 8ãŒæ¨å¥¨ã™ã‚‹æ¨™æº–gemã‚’ç¶­æŒ
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¿½åŠ gemï¼ˆBootstrapç­‰ï¼‰ã‚’è¿½åŠ 
  - ä¸è¦ãªgemã‚’å‰Šé™¤

  ã‚¹ãƒ†ãƒƒãƒ—3: Docker imageã®å†ãƒ“ãƒ«ãƒ‰

  docker-compose build

  ã“ã®ãƒ“ãƒ«ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ï¼š

  1. Dockerfileã®å‡¦ç†
  COPY Gemfile Gemfile.lock ./
  RUN bundle install              # ã“ã“ã§gemãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹
  2. bundle installã®å®Ÿè¡Œç’°å¢ƒ
    - ã‚³ãƒ³ãƒ†ãƒŠå†…ã®Linuxç’°å¢ƒã§å®Ÿè¡Œ
    - PostgreSQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½
    - ãƒã‚¤ãƒ†ã‚£ãƒ–æ‹¡å¼µï¼ˆpg gemç­‰ï¼‰ãŒæ­£ã—ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
  3. ãªãœã‚³ãƒ³ãƒ†ãƒŠå†…ã§bundle installã™ã‚‹ã®ã‹
    - ãƒ›ã‚¹ãƒˆãŒWindows/Macã®å ´åˆï¼šLinuxç”¨ã®ãƒã‚¤ãƒŠãƒªãŒå¿…è¦
    - ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼šPostgreSQLé–‹ç™ºãƒ˜ãƒƒãƒ€ãƒ¼ãªã©ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚ã‚‹
    - ä¸€è²«æ€§ï¼šæœ¬ç•ªç’°å¢ƒã¨åŒã˜Linuxç’°å¢ƒã§ãƒ“ãƒ«ãƒ‰

  ã¾ã¨ã‚

  ã“ã®æ‰‹é †ã«ã‚ˆã‚Šï¼š
  1. Rails 8ã®å®Œå…¨ãªé››å½¢ã‚’å–å¾—
  2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ç¶­æŒ
  3. Dockerç’°å¢ƒã«æœ€é©åŒ–ã•ã‚ŒãŸgemã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

  ãŒå®Ÿç¾ã§ãã¾ã™ã€‚



å®Œå…¨ã«ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã‹ã‚‰é–‹å§‹ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

  Rails newå®Ÿè¡Œå¾Œã®çµ±åˆæ‰‹é †

  1. Rails newã‚’å®Ÿè¡Œ

  docker-compose run --rm web rails new . --database=postgresql --force

  2. ç”Ÿæˆã•ã‚ŒãŸGemfileã¨æ—§Gemfileã®çµ±åˆ

  Rails newã§ç”Ÿæˆã•ã‚ŒãŸæ–°ã—ã„Gemfileã«ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ãŸGemfile.backupã‹
  ã‚‰å¿…è¦ãªgemã‚’è¿½åŠ ã—ã¾ã™ã€‚

  çµ±åˆã®ãƒã‚¤ãƒ³ãƒˆï¼š

  1. Rails 8ã®ã‚³ã‚¢éƒ¨åˆ†ã¯æ–°Gemfileã®ã‚‚ã®ã‚’ç¶­æŒ
    - rails, pg, pumaç­‰ã®åŸºæœ¬gem
  2. æ—§Gemfileã‹ã‚‰è¿½åŠ ã™ã‚‹ã‚‚ã®ï¼š
  # èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
  gem "bcrypt", "~> 3.1.7"

  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»UI
  gem "bootstrap", "~> 5.3.0"
  gem "jquery-rails"
  gem "bootstrap-icons-helper"
  gem "view_component", "~> 3.0"
  gem "kaminari"

  # æ—¥æœ¬èªåŒ–
  gem "rails-i18n"
  gem "enum_help"

  # ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†
  gem "solid_queue"
  gem "solid_cache"
  gem "mission_control-jobs"

  # ãƒ‡ãƒ¼ã‚¿ç®¡ç†
  gem "discard"
  gem "rqrcode"

  # ãƒ¡ãƒ¼ãƒ«
  gem "sendgrid-ruby", "~> 6.7"

  # é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨gemï¼ˆgroupå†…ï¼‰

  3. bundle installã®å®Ÿè¡Œ

  docker-compose run --rm web bundle install

  4. database.ymlã®èª¿æ•´

  ç”Ÿæˆã•ã‚ŒãŸconfig/database.ymlã‚’ç·¨é›†ã—ã¦ã€Dockerç’°å¢ƒã«åˆã‚ã›ã‚‹ï¼š

  default: &default
    adapter: postgresql
    encoding: unicode
    pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
    host: <%= ENV.fetch("DATABASE_HOST", "we_asked_100_db") %>
    username: postgres
    password: <%= ENV.fetch("DATABASE_PASSWORD", "password") %>

  development:
    <<: *default
    database: we_asked_100_people_development

  test:
    <<: *default
    database: we_asked_100_people_test

  5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆ

  docker-compose up -d
  docker-compose exec web rails db:create
  docker-compose exec web rails db:migrate

  6. å‹•ä½œç¢ºèª

  # ãƒ­ã‚°ã‚’ç¢ºèª
  docker-compose logs -f web

  # ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
  # http://localhost:3000

  ã“ã®æ‰‹é †ã§ã€Rails 8ã®æœ€æ–°æ§‹æˆã‚’ç¶­æŒã—ãªãŒã‚‰ã€å¿…è¦ãªgemã‚’çµ±åˆã§ãã¾ã™ã€‚


 æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é€€é¿ã—ã¦rails
  newã‚’å®Ÿè¡Œã—ã€ãã®å¾Œçµ±åˆã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

  æ‰‹é †

  1. æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

  # é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
  cp Gemfile Gemfile.backup
  cp docker-compose.yml docker-compose.yml.backup
  cp Dockerfile Dockerfile.backup
  cp CLAUDE.md CLAUDE.md.backup
  cp -r docs docs.backup
  cp README.md README.md.backup 2>/dev/null || true

  2. Rails newå®Ÿè¡Œå‰ã®æº–å‚™

  # æ—¢å­˜ã®Railsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ™‚å‰Šé™¤
  rm -f Gemfile Gemfile.lock
  rm -rf config/ app/ db/ public/ vendor/
  rm -f config.ru Rakefile

  3. Rails newå®Ÿè¡Œ

  # PostgreSQLä½¿ç”¨ã€ãƒ†ã‚¹ãƒˆç„¡ã—ã€æ¨™æº–èªè¨¼ä»˜ãã§ä½œæˆ
  rails new . --database=postgresql --skip-test --skip-bundle

  4. ãƒ•ã‚¡ã‚¤ãƒ«ã®çµ±åˆ

  # Gemfileã®çµ±åˆï¼ˆæ‰‹å‹•ã§ãƒãƒ¼ã‚¸ãŒå¿…è¦ï¼‰
  # Gemfile.backupã‹ã‚‰å¿…è¦ãªgemã‚’æ–°ã—ã„Gemfileã«è¿½åŠ 

  # Dockeré–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¾©å…ƒ
  mv docker-compose.yml.backup docker-compose.yml
  mv Dockerfile.backup Dockerfile

  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¾©å…ƒ
  mv CLAUDE.md.backup CLAUDE.md
  mv docs.backup docs

  5. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

  bundle install

  æ³¨æ„ç‚¹

  - Gemfileã¯æ‰‹å‹•ãƒãƒ¼ã‚¸ãŒå¿…è¦ï¼ˆRails 8.0.0ã€Ruby 3.3.6ã‚’ç¶­æŒï¼‰
  - config/database.ymlã¯Dockerç”¨ã«ä¿®æ­£ãŒå¿…è¦
  - æ—¢å­˜ã®CLAUDE.mdã¨docsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ä¿æŒ

  çµ±åˆæ™‚ã¯æ—¢å­˜ã®è¨­å®šï¼ˆDockerã€èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãªã©ï¼‰ã‚’å„ªå…ˆã—ã¦ãã ã•ã„ã€‚