# WE ASKED 100 PEOPLE - 開発計画書

## 1. 開発概要

### 1.1 プロジェクト情報
- **開発期間**: 約2-3週間（MVP版）
- **開発手法**: アジャイル開発（1週間スプリント）
- **優先度**: コア機能を優先し、段階的に機能を追加

### 1.2 技術スタック
- **フレームワーク**: Ruby on Rails 8.0.0
- **Ruby**: 3.3.6
- **データベース**: PostgreSQL 15
- **フロントエンド**: 
  - Bootstrap 5.3（UIフレームワーク）
  - Stimulus（JavaScript）
- **開発環境**: Docker Compose
- **バージョン管理**: Git/GitHub

## 2. フェーズ別開発計画

### Phase 1: 基盤構築（2日間）

#### Day 1: プロジェクトセットアップ
- [ ] Rails 8プロジェクト作成
- [ ] PostgreSQLの設定
- [ ] Docker環境構築
- [ ] 基本的なGemのインストール
  - `bootstrap`
  - `jquery-rails`
  - `bootstrap-icons-helper`
  - `rails-i18n`
  - `enum_help`

#### Day 2: 開発環境整備
- [ ] RSpecテスト環境構築
- [ ] FactoryBot設定
- [ ] GitHub リポジトリ設定
- [ ] CI/CD基本設定（GitHub Actions）
- [ ] 開発用seedデータ準備

### Phase 2: 認証システム（2日間）

#### Day 3: 質問作成者認証
- [ ] Rails 8標準認証の実装
- [ ] Userモデル作成
- [ ] 登録・ログイン画面
- [ ] パスワードリセット機能
- [ ] セッション管理

#### Day 4: 回答者識別システム
- [ ] UUID生成機能
- [ ] Cookie管理システム
- [ ] 回答者識別ミドルウェア
- [ ] 重複回答防止機能

### Phase 3: 質問管理機能（3日間）

#### Day 5: 質問モデルと基本CRUD
- [ ] Questionモデル作成
- [ ] 短縮ID生成機能
- [ ] 質問作成フォーム
- [ ] バリデーション実装

#### Day 6: 質問一覧と詳細
- [ ] ダッシュボード作成
- [ ] カード形式の一覧表示
- [ ] ステータス管理（受付中/締切）
- [ ] 回答数カウント表示

#### Day 7: 編集・削除機能
- [ ] 質問編集機能
- [ ] 削除機能（確認モーダル付き）
- [ ] 期限管理システム
- [ ] 自動締切処理

### Phase 4: 回答収集機能（3日間）

#### Day 8: 回答モデルと基本機能
- [ ] Answerモデル作成
- [ ] 回答フォーム画面
- [ ] 短縮URLルーティング（/q/:id）
- [ ] 文字数制限（50文字）

#### Day 9: 回答送信と完了処理
- [ ] 回答保存処理
- [ ] 重複チェック機能
- [ ] 回答完了画面
- [ ] エラーハンドリング

#### Day 10: 回答後のフロー
- [ ] SNSシェア画面
- [ ] URLコピー機能
- [ ] 他の質問への誘導
- [ ] 質問一覧ページ（公開版）

### Phase 5: 集計・分析機能（3日間）

#### Day 11: 回答正規化システム
- [ ] 正規化処理の実装
  - 空白除去
  - 大文字小文字統一
  - 全角半角変換
- [ ] AnswerGroupモデル作成

#### Day 12: 自動グルーピング
- [ ] グルーピングアルゴリズム実装
- [ ] 集計処理
- [ ] ランキング生成
- [ ] パフォーマンス最適化

#### Day 13: 集計結果表示
- [ ] ランキング表示（上位10件）
- [ ] 票数・パーセンテージ表示
- [ ] コピー可能形式の実装
- [ ] 手動グルーピング機能

### Phase 6: SNS連携（2日間）

#### Day 14: Xシェア機能
- [ ] Web Intent API実装
- [ ] シェアボタンコンポーネント
- [ ] シェア文言テンプレート
- [ ] URLコピー機能

#### Day 15: シェア最適化
- [ ] OGPタグ設定
- [ ] シェア用プレビュー
- [ ] 短縮URL対応
- [ ] アナリティクス連携準備

### Phase 7: 仕上げと公開準備（3日間）

#### Day 16: UI/UX改善
- [ ] 全体的なデザイン調整
- [ ] エラーメッセージ改善
- [ ] ローディング表示
- [ ] アクセシビリティ対応

#### Day 17: テストとバグ修正
- [ ] 単体テスト作成
- [ ] 統合テスト作成
- [ ] バグ修正
- [ ] パフォーマンステスト

#### Day 18: デプロイ準備
- [ ] 本番環境設定
- [ ] 環境変数設定
- [ ] セキュリティチェック
- [ ] デプロイスクリプト作成

## 3. マイルストーン

| マイルストーン | 完了予定日 | 成果物 |
|--------------|-----------|--------|
| M1: 基盤完成 | Day 2 | 開発環境構築完了 |
| M2: 認証完成 | Day 4 | ユーザー認証システム |
| M3: 質問機能完成 | Day 7 | 質問CRUD機能 |
| M4: 回答機能完成 | Day 10 | 回答収集システム |
| M5: 集計機能完成 | Day 13 | 自動集計・グルーピング |
| M6: MVP完成 | Day 18 | デプロイ可能な製品 |

## 4. リスク管理

### 4.1 技術的リスク
| リスク | 影響度 | 対策 |
|--------|--------|------|
| Rails 8の新機能での問題 | 中 | ドキュメント確認、コミュニティサポート活用 |
| 類似回答判定の精度 | 高 | 段階的実装、手動グルーピング機能で補完 |
| パフォーマンス問題 | 中 | 早期のインデックス設計、キャッシュ活用 |

### 4.2 スケジュールリスク
| リスク | 影響度 | 対策 |
|--------|--------|------|
| 機能実装の遅延 | 中 | 優先度に基づく機能カット |
| テスト不足 | 高 | TDD採用、自動テスト強化 |
| 要件変更 | 低 | アジャイル開発で柔軟に対応 |

## 5. 品質保証

### 5.1 テスト戦略
- **単体テスト**: RSpec使用、カバレッジ80%以上
- **統合テスト**: 主要フロー全てをカバー
- **手動テスト**: UAT実施、実際の利用シナリオ確認

### 5.2 コードレビュー
- プルリクエストベースの開発
- セルフレビュー必須
- マージ前のCI通過必須

### 5.3 パフォーマンス基準
- ページロード: 3秒以内
- API応答: 1秒以内
- 同時接続: 100ユーザー対応

## 6. 開発後の計画

### 6.1 Phase 2（将来拡張）
- レスポンシブデザイン対応
- より高度な類似判定（形態素解析）
- グラフ表示機能
- 回答者属性収集

### 6.2 Phase 3（長期計画）
- モバイルアプリ開発
- API公開
- 有料プラン導入
- 多言語対応

## 7. 成功指標

### 7.1 技術的指標
- [ ] 全機能の正常動作
- [ ] レスポンス時間3秒以内
- [ ] テストカバレッジ80%以上
- [ ] セキュリティ脆弱性ゼロ

### 7.2 ビジネス指標（運用開始後）
- [ ] 月間アクティブユーザー100人
- [ ] 平均回答数50件/質問
- [ ] ユーザー満足度80%以上

## 8. 開発規約

### 8.1 コーディング規約
- Rubocopによる自動チェック
- Rails Best Practicesに準拠
- 明確な命名規則の遵守

### 8.2 Git運用
- feature branchワークフロー
- コミットメッセージ規約
- 定期的なmainブランチへのマージ

### 8.3 ドキュメント
- コード内コメントは最小限
- READMEの継続的更新
- API仕様書の作成