# WE ASKED 100 PEOPLE - AI開発ルール

## 基本方針

### AI協調開発の目標
- **効率性**: 複数AIの特性を活かした最適な役割分担
- **品質**: 人間の監督下でのAI協調による高品質なコード生成
- **安全性**: セキュリティリスクを最小限に抑えた開発プロセス
- **継続性**: 持続可能で拡張可能なAI開発体制の構築

### 開発体制
- **主要AI**: Claude Code（メイン開発、統括管理）
- **協調AI**: zen-mcp-server経由の複数AI（専門的タスク）
- **人間監督**: 最終チェック、重要な意思決定、セキュリティ検証

## AI協調ワークフロー

### 1. タスク分析・AI選択
```markdown
**Claude Code の役割**:
- 要件分析とタスク分解
- 適切なAIの選択と割り当て
- 全体的な進行管理と品質統制

**zen-mcp-server AI の役割**:
- 専門性を活かした特定タスクの実行
- 深い分析・検証・最適化
- Claude Code への詳細フィードバック
```

### 2. AI選択基準

#### コード分析・レビュー
- **Gemini Pro**: 深いセキュリティ分析、アーキテクチャレビュー
- **O3**: 論理的なコード検証、バグ発見
- **Gemini Flash**: 高速なスタイルチェック、簡単なレビュー

#### 設計・計画
- **O3**: 複雑なロジック設計、アルゴリズム最適化
- **Gemini Pro**: システム設計、アーキテクチャ検討
- **Claude Code**: 全体統括、要件整理

#### 実装・テスト
- **Claude Code**: メイン実装、ViewComponent作成
- **O3**: 複雑なビジネスロジック、テストケース設計
- **Gemini Flash**: 簡単な実装、ドキュメント作成

### 3. 情報共有・引き継ぎ

#### 会話スレッド管理
- zen-mcp-serverの会話スレッド機能を活用
- 最大10回の交換（設定で調整可能）
- 3時間の有効期限（設定で調整可能）
- コンテキスト保持でAI間のシームレスな連携

#### 進捗記録
```markdown
**必須記録項目**:
- 使用したAI（Claude Code, Gemini Pro, O3, Flash等）
- タスク内容と結果
- AI間の引き継ぎ内容
- 人間による確認・承認ポイント
```

## 品質保証・セキュリティ

### 1. コード品質チェック
```bash
# 人間による最終確認前に必須
docker-compose exec web bundle exec rspec
docker-compose exec web bundle exec rubocop
```

### 2. セキュリティ検証ポイント
- **認証・認可**: トークン生成、有効期限、権限チェック
- **入力検証**: バリデーション、SQLインジェクション対策
- **秘密情報**: 環境変数、ログ出力、コード内のハードコーディング
- **CSRF保護**: Rails標準機能の適切な使用

### 3. AI生成コードの検証プロセス
1. **AI実装**: Claude Code または協調AIによる初期実装
2. **相互検証**: 別AIによるコードレビュー（zen-mcp-server活用）
3. **自動テスト**: RSpec、RuboCopによる機械的チェック
4. **人間確認**: セキュリティ・ビジネスロジックの最終検証
5. **承認・マージ**: 人間による最終判断

### 4. 禁止事項
- **秘密情報の露出**: APIキー、パスワード、トークンのハードコーディング
- **セキュリティ機能の迂回**: CSRF保護、認証の無効化
- **テスト・品質チェックのスキップ**: 人間確認なしでの本番反映
- **無制限なAI使用**: コスト管理なしでの大量API呼び出し

## 技術仕様・制約

### 1. zen-mcp-server設定
```bash
# 基本設定場所
/home/bohemian1506/ai-development/zen-mcp-server/

# 重要ファイル
- CLAUDE.md: 開発ガイド
- docs/ai-collaboration.md: AI協調機能説明
- config.py: サーバー設定
```

### 2. API使用量管理
- **コスト上限**: 月間予算内での使用
- **優先度管理**: 重要タスクへのリソース優先配分
- **効率化**: 適切なAI選択によるコスト最適化

### 3. 各AIの特性・使い分け

#### Claude Code
- **得意**: Rails実装、ViewComponent、全体統括
- **使用場面**: メイン開発、最終調整、ユーザー対応

#### Gemini Pro
- **得意**: 深い分析、セキュリティ、アーキテクチャ
- **使用場面**: セキュリティレビュー、複雑な設計検討

#### O3
- **得意**: 論理的思考、数学的処理、バグ発見
- **使用場面**: アルゴリズム最適化、テストケース設計

#### Gemini Flash
- **得意**: 高速処理、簡単なタスク
- **使用場面**: スタイルチェック、ドキュメント作成

## ドキュメント管理

### 1. AI作業ログ記録
```markdown
**作業サマリーへの追加項目**:
- 使用したAI一覧
- AI間の会話・引き継ぎ内容
- 各AIの貢献度・成果
- 人間による介入・判断ポイント
```

### 2. 意思決定記録
- **重要な設計判断**: AIの提案と人間の最終決定
- **セキュリティ判断**: リスク評価と対策選択
- **実装方針**: 複数案からの選択理由

### 3. 振り返り・改善
- **AI選択の適切性**: タスクとAIのマッチング評価
- **協調効果**: AI間連携による品質・効率向上
- **コスト効果**: 投入リソースと得られた成果の分析

## 運用ガイド

### 1. 日常的な開発フロー
1. **要件分析**: Claude Code による初期分析
2. **AI選択**: タスク特性に応じたAI選定
3. **協調実装**: zen-mcp-serverを活用した複数AI協働
4. **品質確認**: 自動テスト + 人間による最終チェック
5. **記録・振り返り**: 作業サマリーでの詳細記録

### 2. 緊急時・問題発生時
- **AI判断の疑問**: 人間による即座の介入・確認
- **セキュリティ懸念**: 即座に作業停止、専門家に相談
- **品質問題**: 複数AIによる再検証、根本原因分析

### 3. 定期的な見直し
- **月次**: AI使用状況、コスト、効果の評価
- **四半期**: ルール・プロセスの見直し、改善
- **年次**: AI技術進歩に応じたルール大幅更新

## 関連ドキュメント
- **[開発ルール](development-rules.md)**: 基本的なコーディング規約
- **[GitHubワークフロー](github-workflow.md)**: PR作成・管理方法
- **[セットアップガイド](setup.md)**: 環境構築手順
- **zen-mcp-server/CLAUDE.md**: AI協調開発の技術詳細
- **zen-mcp-server/docs/ai-collaboration.md**: AI間会話機能説明